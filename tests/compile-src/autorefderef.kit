include "stdio.h";

struct MyStruct {
    var a: Int;
    // refderef for struct fields/assignment not yet implemented
    // var b: Ptr[Int];
    var b: Int;
}

function f1(x: MyStruct) {
    printf("%li\n", x.a);
}

function f2(x: Ptr[MyStruct]) {
    printf("%li\n", x.a);
}

function f3(x: Ptr[Ptr[MyStruct]]) {
    printf("%li\n", x.a);
}

function main() {
    var myVal = struct MyStruct {
        a: 1,
        b: 2,
    };

    var p: Ptr[MyStruct] = &myVal;
    printf("%li\n", p.a);

    f1(myVal);
    // not yet implemented
    // f2(myVal);
    // f3(myVal);
}
